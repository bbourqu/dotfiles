# ~* Mutt Run Commands *~ #

#Global Variables
set my_user = 'chase.hallsted@gmail.com'
set my_msmtp_pass = `gpg -d passwords.gpg`

# Following Guide on https://help.ubuntu.com/community/MuttAndGmail
set realname  = "Chase Hallsted"   # Your Real Name
set from      = $my_user # Set who to appear "as"
set use_from  = yes      # Use from?
set sendmail  =      /usr/bin/msmtp # Use msmtp and not sendmail
set spoolfile = "+INBOX"               # Where to check for mail
set envelope_from = "yes" #

#Folders
set folder    = "~/Mail"  # Mailboxes in here
set record    = "+Sent"   # Sent Messages
set postponed = "+Drafts" # Draft Messages
set move      = no        # Dont move mail from the spool

#MAILBOXES - Regularly checked folders
mailboxes = ! +Fetchmail +slrn +mutt
set sort_browser = alpha # Sort mailboes by alphabetical

# Order of Headers - and what to show
hdr_order Date: From: User-Agent: X-Mailer \
          To: Cc: Subject
ignore *
unignore Date: From: User-Agent: X-Mailer \
         To: Cc: Subject

#Set editor to create new email
set editor='nvim' # Set neovim to edit text
set edit_headers  # We can see the headers as we edit

# Aliases
set sort_alias=alias # Sort Aliases in alphabetical order (by  name)
macro index,pager I '<shell-escape> fetchmail -v<enter>'

#Extra Stuff
set markers
set smart_wrap
set pager_context=5
set status_on_top
push <show-version>













#Basics per account
set imap_user = $my_user          # Gmail Required Full Email
set imap_pass = $my_main_password # Set inside encrypted password.gpg

# Remote Gmail (Recieve)
#set folder = "imaps://chase.hallsted@imap.gmail.com:993" # Needs to be uniqueper account, or remove userid if only using 1 account
#set postponed ="+[Google Mail]/Drafts" # Where to store saved emails
#set trash = "+[Google Mail]/Trash"     # TODO: Need to set this up...

#SMTP Settings to sent email (Send)
set smtp_url  = "smtps://chase.hallsted@smtp.gmail.com:587/"
set smtp_pass = $my_msmtp_password # Set insie encrypted password.gpg
#set record    = "+Sent"  # I should only need this for non-gmail

#Local folders and files
set header_cache     =~/.mutt/cache/headers # Store headers locally
set message_cachedir =~/.mutt/cache/bodies  # Store messages locally
set certificate_file =~/.mutt/certificates  # Store certificates
set alias_file       = ~/.mutt/alias        # Local Alises
set mailcap_path     = ~/.mutt/mailcap      # Entries for filetypes
#set tmpdir           = ~/.mutt/temp        # Temp files
set signature        = ~/.mutt/sig          # Signature file

#Random stuff for now
set move =           yes # Stop asking to "move read messages to mbox"!
set imap_keepalive = 900 # How often to send a hello packet
set mail_check =     120 # How often to check for new mail

#TLS/SSL Stuff
set ssl_force_tls=yes
set ssl_starttls=yes
set ssl_use_sslv2=no
set ssl_use_sslv3=no
set ssl_use_tlsv1=no
set ssl_use_tlsv1_1=no
set ssl_use_tlsv1_2=yes
set ssl_verify_dates=yes
set ssl_verify_host=yes

#Sort by newest conversation first.
set sort = reverse-threads
set sort_aux = last-date-received


#Color scheme
color hdrdefault white black    #fg bg
color header green black From
color quoted cyan black
color signature red black

## Sidebar Patch
##set sidebar_delim   = ' â”‚'
#set sidebar_visible = no
#set sidebar_width   = 24
#color sidebar_new color221 black #color233
#
#set sidebar_delim='|'
#set sidebar_sort=yes
#mailboxes =inbox =[Google Mail]/Drafts
#bind index CP sidebar-prev
#bind index CN sidebar-next
#bind index CO sidebar-open
#bind pager CP sidebar-prev
#bind pager CN sidebar-next
#bind pager CO sidebar-open
#macro index b '<enter-command>toggle sidebar_visible<enter>'
#macro pager b '<enter-command>toggle sidebar_visible<enter>'
#bind index B bounce-message

#Don't ask, just do
set delete
set quit

#Page view settings
set pager="builtin"
set tilde #Pads the end of emails with tilde like vim does

set fast_reply #Doesn't produce too many prompts when replying

#GPG File
## Needs to be sourced BEFORE account specific files are sourced
source "gpg2 -dq $HOME/git/dotfiles/mutt/passwords.gpg |"
